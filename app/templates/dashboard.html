{% extends "index.html" %} {% block content %}

<!-- flash messages to toast -->
<div style="display: none">
  {% with messages = get_flashed_messages(with_categories=true) %} {% if
  messages %} {% for category, message in messages %}
  <div class="alert alert-{{ category }}">{{ message }}</div>
  {% endfor %} {% endif %} {% endwith %}
</div>

<div class="row mb-4">
  <!-- total colleges -->
  <div class="col-md-4">
    <a href="{{ url_for('college.colleges') }}" class="text-decoration-none">
      <div
        class="card count-card shadow-sm p-4 rounded-3 hover-card d-flex flex-row justify-content-between align-items-center"
      >
        <div class="text-start">
          <h5 class="mb-2">Colleges</h5>
          <h2 class="mb-1">{{ total_colleges }}</h2>
          <p class="text-muted mb-0 small">Colleges registered in the system</p>
        </div>
        <i class="bi bi-mortarboard fs-1"></i>
      </div>
    </a>
  </div>

  <!-- total programs -->
  <div class="col-md-4">
    <a href="{{ url_for('program.programs') }}" class="text-decoration-none">
      <div
        class="card count-card shadow-sm p-4 rounded-3 hover-card d-flex flex-row justify-content-between align-items-center"
      >
        <div class="text-start">
          <h5 class="mb-2">Programs</h5>
          <h2 class="mb-1">{{ total_programs }}</h2>
          <p class="text-muted mb-0 small">Programs registered in the system</p>
        </div>
        <i class="bi bi-journal-bookmark fs-1"></i>
      </div>
    </a>
  </div>

  <!-- total students -->
  <div class="col-md-4">
    <a href="{{ url_for('student.students') }}" class="text-decoration-none">
      <div
        class="card count-card shadow-sm p-4 rounded-3 hover-card d-flex flex-row justify-content-between align-items-center"
      >
        <div class="text-start">
          <h5 class="mb-2">Students</h5>
          <h2 class="mb-1">{{ total_students }}</h2>
          <p class="text-muted mb-0 small">Students registered in the system</p>
        </div>
        <i class="bi bi-people fs-1"></i>
      </div>
    </a>
  </div>
</div>

<div class="row">
  <!-- top 5 colleges -->
  <div class="col-md-6 mb-4">
    <div class="card shadow-sm rounded-3">
      <div class="card-header fw-bold">Colleges with Most Students</div>
      <div class="card-body p-0">
        <table class="table table-striped mb-0">
          <thead class="table-light">
            <tr>
              <th scope="col">College</th>
              <th scope="col" class="text-center">Students</th>
            </tr>
          </thead>
          <tbody>
            {% for college, count in top_colleges %}
            <tr>
              <td>{{ college }}</td>
              <td class="text-center">{{ count }}</td>
            </tr>
            {% else %}
            <tr>
              <td colspan="2" class="text-center text-muted py-3">
                No data available
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- top 5 programs -->
  <div class="col-md-6 mb-4">
    <div class="card shadow-sm rounded-3">
      <div class="card-header fw-bold">Programs with Most Students</div>
      <div class="card-body p-0">
        <table class="table table-striped mb-0">
          <thead class="table-light">
            <tr>
              <th scope="col">Program</th>
              <th scope="col" class="text-center">Students</th>
            </tr>
          </thead>
          <tbody>
            {% for program, count in top_programs %}
            <tr>
              <td>{{ program }}</td>
              <td class="text-center">{{ count }}</td>
            </tr>
            {% else %}
            <tr>
              <td colspan="2" class="text-center text-muted py-3">
                No data available
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- college statistics table -->
<div class="row">
  <div class="col-12 mb-4">
    <div class="card shadow-sm rounded-3">
      <div class="card-header fw-bold">College Statistics</div>
      <div class="card-body p-0">
        <div class="table-responsive">
          <table id="dashboard-table" class="table table-striped mb-0">
            <thead class="table-light">
              <tr>
                <th scope="col">College Name</th>
                <th scope="col">College Code</th>
                <th scope="col" class="text-center">Programs</th>
                <th scope="col" class="text-center">Students</th>
              </tr>
            </thead>
            <tbody>
              {% for college in college_statistics %}
              <tr>
                <td>{{ college.name }}</td>
                <td>{{ college.code }}</td>
                <td class="text-center">{{ college.program_count }}</td>
                <td class="text-center">{{ college.student_count }}</td>
              </tr>
              {% else %}
              <tr>
                <td colspan="4" class="text-center text-muted py-3">
                  No data available
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}
